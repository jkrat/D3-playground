{"ast":null,"code":"var _jsxFileName = \"/Users/jim/Source/CD/JavaScript/D3/D3-playground/src/components/PieCharts/BasicPie/index.js\";\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport './style.css';\nimport { data } from './data';\nconst width = 500;\nconst height = Math.min(width, 500);\nconst pieGenerator = d3.pie();\nconst arcs = pieGenerator.sort(null).value(d => d.value)(data);\nconst color = d3.scaleOrdinal().domain(data.map(d => d.name)).range(d3.quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), data.length).reverse());\nconst arc = d3.arc().innerRadius(0).outerRadius(Math.min(width, height) / 2 - 1);\nconst arcLabel = d3.arc().innerRadius(Math.min(width, height) / 2 * 0.8).outerRadius(Math.min(width, height) / 2 * 0.8);\n\nconst BasicPie = () => {\n  useEffect(() => {\n    const chart = d3.select('#BasicPie').attr('viewBox', [-height, -(height / 2), height * 2, height]);\n    chart.append('g').attr('stroke', 'white').selectAll('path').data(arcs).join('path').attr('fill', d => color(d.data.name)).attr('d', arc).append('title').text(d => \"\".concat(d.data.name, \": \").concat(d.data.value.toLocaleString()));\n    chart.append('g').attr('font-family', 'sans-serif').attr('font-size', 12).attr('text-anchor', 'middle').selectAll('text').data(arcs).join('text').attr('transform', d => \"translate(\".concat(arcLabel.centroid(d), \")\")).call(text => text.append('tspan').attr('y', '-0.4em').attr('font-weight', 'bold').text(d => d.data.name)).call(text => text.filter(d => d.endAngle - d.startAngle > 0.25).append('tspan').attr('x', 0).attr('y', '0.7em').attr('fill-opacity', 0.7).text(d => d.data.value.toLocaleString()));\n  });\n  return React.createElement(\"svg\", {\n    id: \"BasicPie\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  });\n};\n\nexport default BasicPie;","map":{"version":3,"sources":["/Users/jim/Source/CD/JavaScript/D3/D3-playground/src/components/PieCharts/BasicPie/index.js"],"names":["React","useEffect","d3","data","width","height","Math","min","pieGenerator","pie","arcs","sort","value","d","color","scaleOrdinal","domain","map","name","range","quantize","t","interpolateSpectral","length","reverse","arc","innerRadius","outerRadius","arcLabel","BasicPie","chart","select","attr","append","selectAll","join","text","toLocaleString","centroid","call","filter","endAngle","startAngle"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport './style.css';\nimport { data } from './data';\n\nconst width = 500;\nconst height = Math.min(width, 500);\nconst pieGenerator = d3.pie();\n\nconst arcs = pieGenerator.sort(null).value(d => d.value)(data);\n\nconst color = d3\n  .scaleOrdinal()\n  .domain(data.map(d => d.name))\n  .range(\n    d3\n      .quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), data.length)\n      .reverse()\n  );\n\nconst arc = d3\n  .arc()\n  .innerRadius(0)\n  .outerRadius(Math.min(width, height) / 2 - 1);\n\nconst arcLabel = d3\n  .arc()\n  .innerRadius((Math.min(width, height) / 2) * 0.8)\n  .outerRadius((Math.min(width, height) / 2) * 0.8);\n\nconst BasicPie = () => {\n  useEffect(() => {\n    const chart = d3\n      .select('#BasicPie')\n      .attr('viewBox', [-height, -(height / 2), height * 2, height]);\n\n    chart\n      .append('g')\n      .attr('stroke', 'white')\n      .selectAll('path')\n      .data(arcs)\n      .join('path')\n      .attr('fill', d => color(d.data.name))\n      .attr('d', arc)\n      .append('title')\n      .text(d => `${d.data.name}: ${d.data.value.toLocaleString()}`);\n\n    chart\n      .append('g')\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', 12)\n      .attr('text-anchor', 'middle')\n      .selectAll('text')\n      .data(arcs)\n      .join('text')\n      .attr('transform', d => `translate(${arcLabel.centroid(d)})`)\n      .call(text =>\n        text\n          .append('tspan')\n          .attr('y', '-0.4em')\n          .attr('font-weight', 'bold')\n          .text(d => d.data.name)\n      )\n      .call(text =>\n        text\n          .filter(d => d.endAngle - d.startAngle > 0.25)\n          .append('tspan')\n          .attr('x', 0)\n          .attr('y', '0.7em')\n          .attr('fill-opacity', 0.7)\n          .text(d => d.data.value.toLocaleString())\n      );\n  });\n\n  return <svg id=\"BasicPie\" />;\n};\n\nexport default BasicPie;\n"]},"metadata":{},"sourceType":"module"}